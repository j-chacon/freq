<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <title>{% block title %}
    {% if view.title %}
      {# Managed properly by the view #}
      {{ view.title }}
    {% else %}
      {# By hand in the template #}
      {% block subtitle %}{% endblock subtitle%}
      {% block sitetitle %}FREQ{% endblock sitetitle%}
    {% endif %}
  {% endblock title %}</title>

  {% block css %}
    <link rel="stylesheet" href=
            "{{ STATIC_URL }}fonts/open-sans/open-sans.css">
    <link rel="stylesheet" href=
            "{{ STATIC_URL }}fonts/font-awesome/4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" href=
            "{{ STATIC_URL }}fonts/font-awesome/4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" href=
            "{{ STATIC_URL }}bootstrap-3.3.5-dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="{{ STATIC_URL }}freq/css/freq.css">
    <link rel="stylesheet"
        href="{{ STATIC_URL }}ajax/libs/leaflet/0.7.3/leaflet.css" />

    {% block chart_css %}
      <link rel="stylesheet" href="{{ STATIC_URL }}nvd3/nv.d3.min.css">
    {% endblock chart_css %}

    {% block extra_css %}
    {% endblock extra_css %}

  {% endblock css %}

</head>

<body>
    {% block header %}
      <header>
        <div id="logo-row" class="navbar">
          <div class="container">
              <div class="navbar-brand" id="logo">
                {% block logo %}
                  {% spaceless %}
                    <a href="/" title='Back to homepage'>
                        <img class="logo" src="{{ STATIC_URL }}freq/logo.png"
                             alt="Lizard" />
                    </a>
                  {% endspaceless %}
                {% endblock logo %}
              </div>
              <div class="navbar-header">

          <div class="navbar-brand" id="page-title">{{ view.title }}</div>
                      </div>
          <ul class="pull-right navbar-nav nav">
              <li><a href="https://ggmn.un-igrac.org/" target="_blank">IGRAC</a></li>
              <li><a href="/accounts/logout/">Log out</a></li>
          </ul>
          </div>
        </div>
      </header>

      {% block nav %}
        <div class="container">
          <ul class="nav nav-tabs" role="tablist">
            {% for menu_title, tooltip, menu_url, menu_activation in menu %}
              <li role="presentation" class="{{ menu_activation }}" aria-controls="{{ menu_url }}">
                  <a href={% if menu_activation == 'disabled' %}'#'{% else %}"{% url menu_url %}"{% endif %} title="{{ tooltip }}">{{ menu_title }}</a></li>
            {% endfor %}
          </ul>
          <!-- Tab panes -->
          <div class="tab-content">
            {% for menu_title, tooltip, menu_url, menu_activation in view.menu %}
                <div role="tabpanel" class="tab-pane {{ menu_activation }}"
                     id="{{ menu_url }}"></div>
            {% endfor %}
          </div>
        </div>
      {% endblock nav %}

    {% endblock header %}

    {% block body %}
      </br>
      <div class="container body-container">
        <div class="row">
          <div class="col-md-8 side-container">
            <div class="row">
              <h2 id="measurement_point">{{ measurement_point }}
                  <a
                    class="glyphicon glyphicon-trash pull-right"
                    href="{% url 'restart' %}"></a>
                  <a
                    href="{% url view.active %}?redo=1"
                    class="glyphicon glyphicon-share-alt pull-right"></a>
                  <a
                    href="{% url view.active %}?undo=1"
                    class="glyphicon glyphicon-share-alt icon-flipped
                    pull-right"></a>
              </h2>
            </div><!-- /row -->
            <div class="row">
                <div class="well">
                    {% block well %}{% endblock well %}
                </div>
            </div><!-- /row -->
          </div><!-- /col -->
          <div class="col-md-4 side-container">
              {% if multiple_timeseries %}
                <div class="dropdown" style="width:100%;">
                  <button class="btn btn-default dropdown-toggle"
                          type="button" id="dropdownMenu1"
                          data-toggle="dropdown" aria-haspopup="true"
                          aria-expanded="true" style="width:100%;
                          text-align:left;">
                    Select timeseries...
                    <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                    {% for option_name, option_uuid, option_start, option_end in timeseries %}
                      <li>
                        <a href="{% url 'timeseries_start_end' uuid=option_uuid start=option_start end=option_end %}">
                          {{ option_name }}
                        </a>
                      </li>
                    {% endfor %}
                  </ul>
                </div>
              {% endif %}
            <div id="map"></div>
            <div id="error-well" class="well well-sm {{ show_error }}">
                {{ error_message }}
            </div>
          </div><!-- /col -->
        </div><!-- /row -->
        <div class="row graph-height">
          <div class="col-md-12 graph-height">
            {% block content %}
              {% block chart %}
                <div id="chart" class="{{ chart }} graph-height">
                  <svg class="graph-height"></svg>
                </div>
              {% endblock chart %}
            {% endblock content %}
          </div>
        </div><!-- /row -->
      </div><!-- /container -->
    {% endblock body %}

  {% block javascript %}
    <div style="visibility: hidden">
      {# Ajax calls need a CSRF token cookie, and this line sends one as a side effect #}
      <!-- {{ csrf_token }} -->

      <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media
      queries -->
      <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
      <!--[if lt IE 9]>
      <script src="{{ STATIC_URL }}html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="{{ STATIC_URL }}respond/1.4.2/respond.min.js"></script>
      <![endif]-->
      <script type="text/javascript">
        window['startpage'] = {};
        window.startpage.leafletImagesUrl=
                "{{ STATIC_URL }}ajax/libs/leaflet/0.7.3/images/";
        window.startpage.active="{{ view.active }}";
        window.startpage.coordsSelected="{{ selected_coords }}";
      </script>
      <script src="{{ STATIC_URL }}jquery/jquery-1.11.3.min.js"></script>
      <script src="{{ STATIC_URL }}bootstrap-3.3.5-dist/js/bootstrap.min.js">
      </script>
      <script src="{{ STATIC_URL }}ajax/libs/leaflet/0.7.3/leaflet.js"></script>

      {% block charts_javascript %}
        <script src="{{ STATIC_URL }}d3/d3.min.js"></script>
        <script src="{{ STATIC_URL }}nvd3/nv.d3.min.js"></script>
      {% endblock charts_javascript %}

      <script src="{{ STATIC_URL }}freq/js/freq.js"></script>

      {% block extra_javascript %}
      {% endblock extra_javascript %}

    </div>
  {% endblock javascript %}

</body>
</html>